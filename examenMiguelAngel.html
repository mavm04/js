<!DOCTYPE html>
<html>

<head>
    <title>VALHALLA</title>
</head>

<body>
    <script>
        let arr = ["C", "U", "S", "R", "U"];
        // asigno a cada simbolo su valor numerico
        const c = 50;
        const u = 1;
        const s = 7;
        const x = 100;

        function valhalla(arr) {
            var resultado = 0;
            //inicializo el valor de el nยบ de restas (numR) para que siempre reste
            //como minimo 1 vez
            var numR = 1;
            for (let i = 0; i < arr.length; i++) {
                //si la ultima posicion es una resta no se hace nada
                if (i == arr.length - 1 && arr[i - 1] == "R") {
                    break;
                }
                //si no sea RESTA y no haya restas acumuladas se suma normal
                if (arr[i] != "R" && numR == 1) {
                    switch (arr[i]) {
                        case "C":
                            resultado += c;
                            break;
                        case "U":
                            resultado += u;
                            break;
                        case "S":
                            resultado += s;
                            break;
                        case "X":
                            resultado += X;
                            break;
                        default:
                            break;
                    }
                    //si es resta y la siguiente posicion no es otra resta, hace la 
                    //operacion de resta
                } else if (arr[i] == "R" && arr[i + 1] != "R") {
                    switch (arr[i + 1]) {
                        case "C":
                            resultado = resultado - (c * numR);
                            numR = numR / 2;
                            break;
                        case "U":
                            resultado = resultado - (u * numR);
                            numR = numR / 2;
                            break;
                        case "S":
                            resultado = resultado - (s * numR);
                            numR = numR / 2;
                            break;
                        case "X":
                            resultado = resultado - (x * numR);
                            numR = numR / 2;
                            break;
                        default:
                            break;
                    }
                    //reseteo el valor de la resta a su valor inicial 1
                    numR == 1;
                } else if (arr[i + 1] == "R") {
                    //acumula la resta si la siguiente posicion a i es resta
                    numR = numR + numR;
                } else { }
            }
            return resultado;
        }
        console.log("El resultado es: " + valhalla(arr));
    </script>
</body>
</html>